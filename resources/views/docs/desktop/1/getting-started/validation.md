---
title: ValidaÃ§Ã£o Universal
order: 004
---
## IntroduÃ§Ã£o

O Laravel Lusophone revoluciona a validaÃ§Ã£o de formulÃ¡rios ao oferecer **regras universais** que funcionam automaticamente em todos os paÃ­ses lusÃ³fonos. Uma Ãºnica regra `lusophone_tax_id` valida documentos fiscais em Portugal (NIF), Brasil (CPF), MoÃ§ambique (NUIT), Angola (NIF), e todos os outros paÃ­ses automaticamente.

## Regras de ValidaÃ§Ã£o Universais

### ValidaÃ§Ã£o de Documento Fiscal

A regra `lusophone_tax_id` Ã© inteligente e adapta-se automaticamente ao paÃ­s do utilizador:

```php
// Uma regra, funciona em todos os paÃ­ses lusÃ³fonos
$rules = [
    'tax_id' => 'required|lusophone_tax_id',
];

// Resultados automÃ¡ticos por paÃ­s:
// ğŸ‡µğŸ‡¹ Portugal: Valida NIF (9 dÃ­gitos + algoritmo especÃ­fico)
// ğŸ‡§ğŸ‡· Brasil: Valida CPF (11 dÃ­gitos + algoritmo especÃ­fico)  
// ğŸ‡²ğŸ‡¿ MoÃ§ambique: Valida NUIT (9 dÃ­gitos)
// ğŸ‡¦ğŸ‡´ Angola: Valida NIF (10 dÃ­gitos + algoritmo angolano)
// ğŸ‡¨ğŸ‡» Cabo Verde: Valida NIF (9 dÃ­gitos)
```

**Exemplo prÃ¡tico:**
```php
// app/Http/Requests/UserRegistrationRequest.php
<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class UserRegistrationRequest extends FormRequest
{
    public function rules()
    {
        return [
            'name' => 'required|string|max:255',
            'email' => 'required|email|unique:users',
            'tax_id' => 'required|lusophone_tax_id', // âœ¨ Magia aqui
            'phone' => 'required|lusophone_phone',
            'password' => 'required|min:8|confirmed',
        ];
    }
}
```

### ValidaÃ§Ã£o de Telefone

```php
$rules = [
    'phone' => 'required|lusophone_phone',
];

// Formatos aceites automaticamente por paÃ­s:
// ğŸ‡µğŸ‡¹ Portugal: +351912345678, 912345678, +351212345678
// ğŸ‡§ğŸ‡· Brasil: +5511987654321, (11)98765-4321, 11987654321
// ğŸ‡²ğŸ‡¿ MoÃ§ambique: +258823456789, 823456789, +258211234567
// ğŸ‡¦ğŸ‡´ Angola: +244912345678, 912345678
```

### ValidaÃ§Ã£o de CÃ³digo Postal

```php
$rules = [
    'postal_code' => 'nullable|lusophone_postal',
];

// Formatos por paÃ­s:
// ğŸ‡µğŸ‡¹ Portugal: 1000-001, 4000-007 (XXXX-XXX)
// ğŸ‡§ğŸ‡· Brasil: 01310-100, 20040020 (XXXXX-XXX ou XXXXXXXX)
// ğŸ‡²ğŸ‡¿ MoÃ§ambique: 1100, 3100 (XXXX - Maputo, Beira, etc.)
// ğŸ‡¦ğŸ‡´ Angola: Similar a Portugal
```

## ValidaÃ§Ãµes EspecÃ­ficas por PaÃ­s

Para casos onde precisa de validaÃ§Ã£o especÃ­fica de um paÃ­s:

### Portugal

```php
$rules = [
    'nif' => 'required|nif_portugal',           // NIF portuguÃªs especÃ­fico
    'phone' => 'required|phone_portugal',       // Telefone portuguÃªs
    'postal' => 'required|postal_portugal',     // CÃ³digo postal portuguÃªs
    'cc' => 'nullable|cc_portugal',             // CartÃ£o de cidadÃ£o (opcional)
];
```

### Brasil

```php
$rules = [
    'cpf' => 'required|cpf_brasil',             // CPF brasileiro
    'cnpj' => 'nullable|cnpj_brasil',           // CNPJ para empresas
    'phone' => 'required|phone_brasil',         // Telefone brasileiro
    'cep' => 'required|cep_brasil',             // CEP brasileiro
];
```

### MoÃ§ambique

```php
$rules = [
    'nuit' => 'required|nuit_mocambique',       // NUIT moÃ§ambicano
    'phone' => 'required|phone_mocambique',     // Telefone moÃ§ambicano  
    'postal' => 'nullable|postal_mocambique',   // CÃ³digo postal moÃ§ambicano
    'bi' => 'nullable|bi_mocambique',           // Bilhete de identidade
];
```

### Angola

```php
$rules = [
    'nif' => 'required|nif_angola',             // NIF angolano
    'phone' => 'required|phone_angola',         // Telefone angolano
    'bi' => 'nullable|bi_angola',               // Bilhete de identidade
];
```

## Mensagens de Erro Localizadas

As mensagens de erro sÃ£o automaticamente adaptadas ao contexto cultural de cada paÃ­s:

### MoÃ§ambique
```php
// Para utilizador moÃ§ambicano:
'lusophone_tax_id' => 'O campo NUIT Ã© obrigatÃ³rio.',
'lusophone_phone' => 'O nÃºmero de celular nÃ£o Ã© vÃ¡lido.',
```

### Portugal
```php
// Para utilizador portuguÃªs:
'lusophone_tax_id' => 'O campo NIF Ã© obrigatÃ³rio.',
'lusophone_phone' => 'O nÃºmero de telemÃ³vel nÃ£o Ã© vÃ¡lido.',
```

### Brasil
```php
// Para utilizador brasileiro:
'lusophone_tax_id' => 'O campo CPF Ã© obrigatÃ³rio.',
'lusophone_phone' => 'O nÃºmero de telefone nÃ£o Ã© vÃ¡lido.',
```

## PersonalizaÃ§Ã£o de Mensagens

### Mensagens Globais

```php
// resources/lang/pt/validation.php
'lusophone_tax_id' => 'O :attribute deve ser um documento fiscal vÃ¡lido.',
'lusophone_phone' => 'O :attribute deve ser um nÃºmero de telefone vÃ¡lido.',
'lusophone_postal' => 'O :attribute deve ser um cÃ³digo postal vÃ¡lido.',
```

### Mensagens por PaÃ­s

```php
// resources/lang/pt_MZ/validation.php (MoÃ§ambique)
'lusophone_tax_id' => 'O :attribute deve ser um NUIT vÃ¡lido (9 dÃ­gitos).',
'lusophone_phone' => 'O :attribute deve ser um nÃºmero de celular vÃ¡lido.',

// resources/lang/pt_PT/validation.php (Portugal)  
'lusophone_tax_id' => 'O :attribute deve ser um NIF vÃ¡lido.',
'lusophone_phone' => 'O :attribute deve ser um nÃºmero de telemÃ³vel vÃ¡lido.',

// resources/lang/pt_BR/validation.php (Brasil)
'lusophone_tax_id' => 'O :attribute deve ser um CPF vÃ¡lido.',
'lusophone_phone' => 'O :attribute deve ser um nÃºmero de telefone vÃ¡lido.',
```

### Mensagens Personalizadas por Campo

```php
// app/Http/Requests/CompanyRegistrationRequest.php
public function messages()
{
    return [
        'company_tax_id.lusophone_tax_id' => 'O documento fiscal da empresa deve ser vÃ¡lido para o paÃ­s selecionado.',
        'director_phone.lusophone_phone' => 'O contacto do director deve incluir um nÃºmero vÃ¡lido.',
    ];
}
```

## ValidaÃ§Ã£o Condicional

### Baseada na RegiÃ£o Detectada

```php
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;

public function rules()
{
    $region = Lusophone::detectRegion();
    
    $rules = [
        'name' => 'required|string',
        'tax_id' => 'required|lusophone_tax_id',
    ];
    
    // Adicionar validaÃ§Ãµes especÃ­ficas por paÃ­s
    switch ($region) {
        case 'BR':
            $rules['cnpj'] = 'nullable|cnpj_brasil'; // Para empresas brasileiras
            break;
            
        case 'PT':
            $rules['niss'] = 'nullable|niss_portugal'; // NÃºmero SeguranÃ§a Social
            break;
            
        case 'MZ':
            $rules['employer'] = 'nullable|string'; // Campo opcional em MoÃ§ambique
            break;
    }
    
    return $rules;
}
```

### ValidaÃ§Ã£o DinÃ¢mica no Frontend

```javascript
// resources/js/validation.js
document.addEventListener('DOMContentLoaded', function() {
    // Obter regiÃ£o do backend
    const region = window.Laravel.region || 'MZ';
    
    // Configurar mÃ¡scaras de input baseadas na regiÃ£o
    switch(region) {
        case 'PT':
            $('#tax_id').mask('000000000', {placeholder: 'NIF: 123456789'});
            $('#phone').mask('+351000000000', {placeholder: '+351912345678'});
            break;
            
        case 'BR':
            $('#tax_id').mask('000.000.000-00', {placeholder: 'CPF: 123.456.789-00'});
            $('#phone').mask('+55(00)00000-0000', {placeholder: '+55(11)99999-9999'});
            break;
            
        case 'MZ':
            $('#tax_id').mask('000000000', {placeholder: 'NUIT: 123456789'});
            $('#phone').mask('+258000000000', {placeholder: '+258823456789'});
            break;
    }
});
```

## ValidaÃ§Ã£o AvanÃ§ada

### ValidaÃ§Ã£o de Empresas

```php
// Para registos de empresas
$rules = [
    'company_type' => 'required|in:individual,company',
    'tax_id' => 'required|lusophone_tax_id',
    
    // ValidaÃ§Ã£o condicional para empresas
    'company_tax_id' => [
        'required_if:company_type,company',
        'lusophone_business_id', // Valida CNPJ (BR), NIF empresarial (PT/AO), etc.
    ],
    
    'trade_license' => [
        'required_if:company_type,company',
        'lusophone_trade_license', // Valida licenÃ§as comerciais locais
    ],
];
```

### ValidaÃ§Ã£o BancÃ¡ria

```php
$rules = [
    'iban' => [
        'nullable',
        'lusophone_iban', // Valida IBAN para PT, IBAN-like para outros paÃ­ses
    ],
    
    'bank_account' => [
        'required',
        'lusophone_bank_account', // Formatos de conta bancÃ¡ria locais
    ],
    
    'swift_code' => [
        'nullable', 
        'lusophone_swift', // CÃ³digos SWIFT de bancos lusÃ³fonos
    ],
];
```

### ValidaÃ§Ã£o de EndereÃ§os

```php
$rules = [
    'address' => 'required|string|max:255',
    'city' => 'required|lusophone_city',        // Cidades vÃ¡lidas do paÃ­s
    'province' => 'required|lusophone_province', // ProvÃ­ncias/estados vÃ¡lidos
    'postal_code' => 'required|lusophone_postal',
    'country' => 'required|lusophone_country',   // PaÃ­ses lusÃ³fonos apenas
];
```

## IntegraÃ§Ã£o com APIs

### ValidaÃ§Ã£o de API REST

```php
// app/Http/Controllers/Api/UserController.php
<?php

namespace App\Http\Controllers\Api;

use App\Http\Controllers\Controller;
use App\Http\Requests\Api\CreateUserRequest;
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;

class UserController extends Controller
{
    public function store(CreateUserRequest $request)
    {
        $region = Lusophone::detectRegion();
        
        // Criar utilizador com dados validados
        $user = User::create([
            'name' => $request->name,
            'email' => $request->email,
            'tax_id' => $request->tax_id,
            'phone' => $request->phone,
            'region' => $region,
        ]);
        
        // Retornar resposta localizada
        return response()->json([
            'message' => __('User created successfully'),
            'user' => $user,
            'region_info' => Lusophone::getCountryInfo($region),
        ], 201);
    }
}
```

### ValidaÃ§Ã£o GraphQL

```php
// app/GraphQL/Mutations/CreateUser.php
<?php

namespace App\GraphQL\Mutations;

use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;
use Nuwave\Lighthouse\Support\Contracts\GraphQLContext;

class CreateUser
{
    public function __invoke($rootValue, array $args, GraphQLContext $context)
    {
        // Validar automaticamente baseado na regiÃ£o
        $validator = Validator::make($args, [
            'name' => 'required|string|max:255',
            'tax_id' => 'required|lusophone_tax_id',
            'phone' => 'required|lusophone_phone',
        ]);
        
        if ($validator->fails()) {
            throw new ValidationException($validator);
        }
        
        return User::create($validator->validated());
    }
}
```

## Testagem de ValidaÃ§Ãµes

### Testes UnitÃ¡rios

```php
// tests/Feature/LusophoneValidationTest.php
<?php

namespace Tests\Feature;

use Tests\TestCase;
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;
use Illuminate\Support\Facades\Validator;

class LusophoneValidationTest extends TestCase
{
    /** @test */
    public function it_validates_portuguese_nif()
    {
        Lusophone::forceRegion('PT');
        
        // NIF vÃ¡lido portuguÃªs
        $validator = Validator::make(
            ['tax_id' => '123456789'],
            ['tax_id' => 'lusophone_tax_id']
        );
        
        $this->assertFalse($validator->fails());
    }
    
    /** @test */
    public function it_validates_mozambican_nuit()
    {
        Lusophone::forceRegion('MZ');
        
        // NUIT vÃ¡lido moÃ§ambicano
        $validator = Validator::make(
            ['tax_id' => '123456789'],
            ['tax_id' => 'lusophone_tax_id']
        );
        
        $this->assertFalse($validator->fails());
    }
    
    /** @test */
    public function it_validates_brazilian_cpf()
    {
        Lusophone::forceRegion('BR');
        
        // CPF vÃ¡lido brasileiro
        $validator = Validator::make(
            ['tax_id' => '11144477735'],
            ['tax_id' => 'lusophone_tax_id']
        );
        
        $this->assertFalse($validator->fails());
    }
    
    /** @test */
    public function it_validates_phone_numbers_by_region()
    {
        $testCases = [
            'PT' => ['phone' => '+351912345678'],
            'BR' => ['phone' => '+5511987654321'],
            'MZ' => ['phone' => '+258823456789'],
            'AO' => ['phone' => '+244912345678'],
        ];
        
        foreach ($testCases as $region => $data) {
            Lusophone::forceRegion($region);
            
            $validator = Validator::make($data, [
                'phone' => 'lusophone_phone'
            ]);
            
            $this->assertFalse($validator->fails(), 
                "Failed validation for {$region} phone: {$data['phone']}"
            );
        }
    }
}
```

### Testes de IntegraÃ§Ã£o

```php
// tests/Feature/RegistrationFormTest.php
<?php

namespace Tests\Feature;

use Tests\TestCase;
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;

class RegistrationFormTest extends TestCase
{
    /** @test */
    public function user_can_register_with_valid_mozambican_data()
    {
        Lusophone::forceRegion('MZ');
        
        $response = $this->post('/register', [
            'name' => 'JoÃ£o Silva',
            'email' => 'joao@exemplo.mz',
            'tax_id' => '123456789',        // NUIT vÃ¡lido
            'phone' => '+258823456789',     // Telefone moÃ§ambicano
            'password' => 'password123',
            'password_confirmation' => 'password123',
        ]);
        
        $response->assertRedirect('/dashboard');
        $this->assertDatabaseHas('users', [
            'email' => 'joao@exemplo.mz',
            'tax_id' => '123456789',
        ]);
    }
    
    /** @test */
    public function registration_fails_with_invalid_tax_id()
    {
        Lusophone::forceRegion('PT');
        
        $response = $this->post('/register', [
            'name' => 'Maria Santos',
            'email' => 'maria@exemplo.pt',
            'tax_id' => '123',              // NIF invÃ¡lido (muito curto)
            'phone' => '+351912345678',
            'password' => 'password123',
            'password_confirmation' => 'password123',
        ]);
        
        $response->assertSessionHasErrors(['tax_id']);
        $response->assertSessionHasErrorsIn('default', [
            'tax_id' => 'O NIF deve ser um nÃºmero vÃ¡lido de 9 dÃ­gitos.'
        ]);
    }
}
```

### Teste de Performance

```php
// tests/Performance/ValidationPerformanceTest.php
<?php

namespace Tests\Performance;

use Tests\TestCase;
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;
use Illuminate\Support\Facades\Validator;

class ValidationPerformanceTest extends TestCase
{
    /** @test */
    public function validation_performance_benchmark()
    {
        $regions = ['PT', 'BR', 'MZ', 'AO'];
        $testData = [
            'PT' => ['tax_id' => '123456789'],
            'BR' => ['tax_id' => '11144477735'],
            'MZ' => ['tax_id' => '123456789'],
            'AO' => ['tax_id' => '1234567890'],
        ];
        
        foreach ($regions as $region) {
            Lusophone::forceRegion($region);
            
            $startTime = microtime(true);
            
            // Executar 1000 validaÃ§Ãµes
            for ($i = 0; $i < 1000; $i++) {
                $validator = Validator::make(
                    $testData[$region],
                    ['tax_id' => 'lusophone_tax_id']
                );
                $validator->fails();
            }
            
            $endTime = microtime(true);
            $duration = ($endTime - $startTime) * 1000; // em milissegundos
            
            // Deve ser menor que 100ms para 1000 validaÃ§Ãµes
            $this->assertLessThan(100, $duration, 
                "Validation for {$region} took {$duration}ms for 1000 operations"
            );
        }
    }
}
```

## Debugging de ValidaÃ§Ãµes

### Logs de ValidaÃ§Ã£o

```php
// config/logging.php
'channels' => [
    'lusophone_validation' => [
        'driver' => 'daily',
        'path' => storage_path('logs/lusophone-validation.log'),
        'level' => env('LOG_LEVEL', 'debug'),
        'days' => 14,
    ],
],
```

```php
// app/Http/Middleware/LogLusophoneValidation.php
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Log;
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;

class LogLusophoneValidation
{
    public function handle(Request $request, Closure $next)
    {
        $response = $next($request);
        
        // Log tentativas de validaÃ§Ã£o falhadas
        if ($response->getStatusCode() === 422) {
            $region = Lusophone::detectRegion();
            $errors = session('errors') ? session('errors')->toArray() : [];
            
            Log::channel('lusophone_validation')->warning('Validation failed', [
                'region' => $region,
                'errors' => $errors,
                'input' => $request->except(['password', 'password_confirmation']),
                'ip' => $request->ip(),
                'user_agent' => $request->userAgent(),
            ]);
        }
        
        return $response;
    }
}
```

### Comando de Debug

```bash
# Testar validaÃ§Ãµes especÃ­ficas
php artisan lusophone:test-validation

# SaÃ­da esperada:
# ğŸ§ª Teste de ValidaÃ§Ãµes Laravel Lusophone
# 
# âœ… Portugal (PT):
#    NIF: 123456789 â†’ VÃ¡lido
#    Telefone: +351912345678 â†’ VÃ¡lido
#    CÃ³digo Postal: 1000-001 â†’ VÃ¡lido
# 
# âœ… Brasil (BR):
#    CPF: 11144477735 â†’ VÃ¡lido
#    Telefone: +5511987654321 â†’ VÃ¡lido
#    CEP: 01310-100 â†’ VÃ¡lido
# 
# âœ… MoÃ§ambique (MZ):
#    NUIT: 123456789 â†’ VÃ¡lido
#    Telefone: +258823456789 â†’ VÃ¡lido
#    CÃ³digo Postal: 1100 â†’ VÃ¡lido
```

## ValidaÃ§Ãµes Customizadas

### Criar ValidaÃ§Ã£o Personalizada

```php
// app/Rules/CustomLusophoneRule.php
<?php

namespace App\Rules;

use Illuminate\Contracts\Validation\Rule;
use ArnaldoTomo\LaravelLusophone\Facades\Lusophone;

class ValidLusophoneBusinessLicense implements Rule
{
    protected $region;
    
    public function __construct($region = null)
    {
        $this->region = $region ?: Lusophone::detectRegion();
    }
    
    public function passes($attribute, $value)
    {
        return match ($this->region) {
            'PT' => $this->validatePortugueseLicense($value),
            'BR' => $this->validateBrazilianLicense($value),
            'MZ' => $this->validateMozambicanLicense($value),
            'AO' => $this->validateAngolanLicense($value),
            default => true, // Outros paÃ­ses aceites por padrÃ£o
        };
    }
    
    public function message()
    {
        return match ($this->region) {
            'PT' => 'A licenÃ§a comercial portuguesa deve ter o formato correto.',
            'BR' => 'O CNPJ deve ser vÃ¡lido.',
            'MZ' => 'A licenÃ§a comercial moÃ§ambicana deve ser vÃ¡lida.',
            'AO' => 'O NIF empresarial angolano deve ser vÃ¡lido.',
            default => 'A licenÃ§a comercial deve ser vÃ¡lida.',
        };
    }
    
    private function validatePortugueseLicense($value)
    {
        // LÃ³gica especÃ­fica para Portugal
        return preg_match('/^PT\d{9}$/', $value);
    }
    
    private function validateBrazilianLicense($value)
    {
        // LÃ³gica especÃ­fica para Brasil (CNPJ)
        return $this->validateCNPJ($value);
    }
    
    private function validateMozambicanLicense($value)
    {
        // LÃ³gica especÃ­fica para MoÃ§ambique
        return preg_match('/^MZ\d{8}$/', $value);
    }
    
    private function validateAngolanLicense($value)
    {
        // LÃ³gica especÃ­fica para Angola
        return preg_match('/^\d{10}$/', $value);
    }
    
    private function validateCNPJ($cnpj)
    {
        // Algoritmo de validaÃ§Ã£o CNPJ
        $cnpj = preg_replace('/\D/', '', $cnpj);
        
        if (strlen($cnpj) != 14) {
            return false;
        }
        
        // CÃ¡lculo dos dÃ­gitos verificadores
        $soma = 0;
        $multiplicador = 5;
        
        for ($i = 0; $i < 12; $i++) {
            $soma += $cnpj[$i] * $multiplicador;
            $multiplicador = ($multiplicador == 2) ? 9 : $multiplicador - 1;
        }
        
        $resto = $soma % 11;
        $dv1 = ($resto < 2) ? 0 : 11 - $resto;
        
        if ($cnpj[12] != $dv1) {
            return false;
        }
        
        $soma = 0;
        $multiplicador = 6;
        
        for ($i = 0; $i < 13; $i++) {
            $soma += $cnpj[$i] * $multiplicador;
            $multiplicador = ($multiplicador == 2) ? 9 : $multiplicador - 1;
        }
        
        $resto = $soma % 11;
        $dv2 = ($resto < 2) ? 0 : 11 - $resto;
        
        return $cnpj[13] == $dv2;
    }
}
```

### Usar a ValidaÃ§Ã£o Personalizada

```php
// app/Http/Requests/BusinessRegistrationRequest.php
use App\Rules\ValidLusophoneBusinessLicense;

public function rules()
{
    return [
        'business_name' => 'required|string|max:255',
        'tax_id' => 'required|lusophone_tax_id',
        'business_license' => ['required', new ValidLusophoneBusinessLicense()],
        'phone' => 'required|lusophone_phone',
    ];
}
```

## IntegraÃ§Ã£o Frontend

### Vue.js Component

```vue
<!-- resources/js/components/LusophoneForm.vue -->
<template>
    <form @submit="submitForm">
        <div class="form-group">
            <label :for="taxIdLabel">{{ taxIdLabel }}</label>
            <input 
                v-model="form.tax_id"
                :placeholder="taxIdPlaceholder"
                :class="{ 'is-invalid': errors.tax_id }"
                @input="validateTaxId"
            />
            <div v-if="errors.tax_id" class="invalid-feedback">
                {{ errors.tax_id }}
            </div>
        </div>
        
        <div class="form-group">
            <label :for="phoneLabel">{{ phoneLabel }}</label>
            <input 
                v-model="form.phone"
                :placeholder="phonePlaceholder"
                :class="{ 'is-invalid': errors.phone }"
                @input="validatePhone"
            />
            <div v-if="errors.phone" class="invalid-feedback">
                {{ errors.phone }}
            </div>
        </div>
        
        <button type="submit" :disabled="!isFormValid">
            {{ submitText }}
        </button>
    </form>
</template>

<script>
export default {
    name: 'LusophoneForm',
    
    data() {
        return {
            region: 'MZ', // SerÃ¡ definido pelo backend
            form: {
                tax_id: '',
                phone: '',
            },
            errors: {},
        }
    },
    
    computed: {
        taxIdLabel() {
            const labels = {
                'PT': 'NIF',
                'BR': 'CPF', 
                'MZ': 'NUIT',
                'AO': 'NIF',
                'CV': 'NIF',
            };
            return labels[this.region] || 'Documento Fiscal';
        },
        
        taxIdPlaceholder() {
            const placeholders = {
                'PT': '123456789',
                'BR': '123.456.789-00',
                'MZ': '123456789',
                'AO': '1234567890',
            };
            return placeholders[this.region] || '123456789';
        },
        
        phoneLabel() {
            const labels = {
                'PT': 'TelemÃ³vel',
                'BR': 'Telefone',
                'MZ': 'Celular',
                'AO': 'Telefone',
            };
            return labels[this.region] || 'Telefone';
        },
        
        phonePlaceholder() {
            const placeholders = {
                'PT': '+351912345678',
                'BR': '+5511987654321',
                'MZ': '+258823456789',
                'AO': '+244912345678',
            };
            return placeholders[this.region] || '+258XXXXXXXXX';
        },
        
        submitText() {
            return 'Registar';
        },
        
        isFormValid() {
            return this.form.tax_id && this.form.phone && 
                   Object.keys(this.errors).length === 0;
        }
    },
    
    methods: {
        validateTaxId() {
            // ValidaÃ§Ã£o no frontend para feedback imediato
            const value = this.form.tax_id;
            
            if (!value) {
                this.$set(this.errors, 'tax_id', `${this.taxIdLabel} Ã© obrigatÃ³rio`);
                return;
            }
            
            // ValidaÃ§Ãµes especÃ­ficas por paÃ­s
            let isValid = false;
            
            switch (this.region) {
                case 'PT':
                case 'MZ':
                case 'CV':
                    isValid = /^\d{9}$/.test(value);
                    break;
                case 'BR':
                    isValid = this.validateCPF(value);
                    break;
                case 'AO':
                    isValid = /^\d{10}$/.test(value);
                    break;
            }
            
            if (isValid) {
                this.$delete(this.errors, 'tax_id');
            } else {
                this.$set(this.errors, 'tax_id', 
                    `${this.taxIdLabel} invÃ¡lido`);
            }
        },
        
        validatePhone() {
            const value = this.form.phone;
            
            if (!value) {
                this.$set(this.errors, 'phone', 
                    `${this.phoneLabel} Ã© obrigatÃ³rio`);
                return;
            }
            
            // ValidaÃ§Ã£o bÃ¡sica de formato
            const phoneRegex = /^\+?\d{8,15}$/;
            
            if (phoneRegex.test(value.replace(/\s/g, ''))) {
                this.$delete(this.errors, 'phone');
            } else {
                this.$set(this.errors, 'phone', 
                    `${this.phoneLabel} invÃ¡lido`);
            }
        },
        
        validateCPF(cpf) {
            // ImplementaÃ§Ã£o simplificada da validaÃ§Ã£o CPF
            cpf = cpf.replace(/\D/g, '');
            
            if (cpf.length !== 11) return false;
            
            // VerificaÃ§Ã£o dos dÃ­gitos
            let soma = 0;
            for (let i = 0; i < 9; i++) {
                soma += parseInt(cpf.charAt(i)) * (10 - i);
            }
            
            let resto = 11 - (soma % 11);
            let digito1 = resto > 9 ? 0 : resto;
            
            if (parseInt(cpf.charAt(9)) !== digito1) return false;
            
            soma = 0;
            for (let i = 0; i < 10; i++) {
                soma += parseInt(cpf.charAt(i)) * (11 - i);
            }
            
            resto = 11 - (soma % 11);
            let digito2 = resto > 9 ? 0 : resto;
            
            return parseInt(cpf.charAt(10)) === digito2;
        },
        
        async submitForm(event) {
            event.preventDefault();
            
            // Validar todos os campos antes do envio
            this.validateTaxId();
            this.validatePhone();
            
            if (!this.isFormValid) {
                return;
            }
            
            try {
                const response = await axios.post('/api/register', {
                    ...this.form,
                    region: this.region,
                });
                
                // Sucesso
                this.$emit('success', response.data);
                
            } catch (error) {
                if (error.response?.status === 422) {
                    // Erros de validaÃ§Ã£o do backend
                    this.errors = error.response.data.errors;
                } else {
                    // Outros erros
                    console.error('Erro ao registar:', error);
                }
            }
        }
    },
    
    mounted() {
        // Obter regiÃ£o do backend
        this.region = window.Laravel?.region || 'MZ';
    }
}
</script>
```

### React Component

```jsx
// resources/js/components/LusophoneForm.jsx
import React, { useState, useEffect } from 'react';
import axios from 'axios';

const LusophoneForm = () => {
    const [region, setRegion] = useState('MZ');
    const [form, setForm] = useState({
        tax_id: '',
        phone: '',
    });
    const [errors, setErrors] = useState({});
    
    const regionConfig = {
        PT: {
            taxIdLabel: 'NIF',
            taxIdPlaceholder: '123456789',
            phoneLabel: 'TelemÃ³vel',
            phonePlaceholder: '+351912345678',
        },
        BR: {
            taxIdLabel: 'CPF',
            taxIdPlaceholder: '123.456.789-00',
            phoneLabel: 'Telefone',
            phonePlaceholder: '+5511987654321',
        },
        MZ: {
            taxIdLabel: 'NUIT',
            taxIdPlaceholder: '123456789',
            phoneLabel: 'Celular',
            phonePlaceholder: '+258823456789',
        },
        AO: {
            taxIdLabel: 'NIF',
            taxIdPlaceholder: '1234567890',
            phoneLabel: 'Telefone',
            phonePlaceholder: '+244912345678',
        },
    };
    
    const config = regionConfig[region] || regionConfig.MZ;
    
    const validateTaxId = (value) => {
        if (!value) {
            return `${config.taxIdLabel} Ã© obrigatÃ³rio`;
        }
        
        let isValid = false;
        
        switch (region) {
            case 'PT':
            case 'MZ':
            case 'CV':
                isValid = /^\d{9}$/.test(value);
                break;
            case 'BR':
                isValid = validateCPF(value);
                break;
            case 'AO':
                isValid = /^\d{10}$/.test(value);
                break;
        }
        
        return isValid ? null : `${config.taxIdLabel} invÃ¡lido`;
    };
    
    const validatePhone = (value) => {
        if (!value) {
            return `${config.phoneLabel} Ã© obrigatÃ³rio`;
        }
        
        const phoneRegex = /^\+?\d{8,15}$/;
        
        return phoneRegex.test(value.replace(/\s/g, '')) 
            ? null 
            : `${config.phoneLabel} invÃ¡lido`;
    };
    
    const validateCPF = (cpf) => {
        cpf = cpf.replace(/\D/g, '');
        
        if (cpf.length !== 11) return false;
        
        // ImplementaÃ§Ã£o simplificada
        let soma = 0;
        for (let i = 0; i < 9; i++) {
            soma += parseInt(cpf.charAt(i)) * (10 - i);
        }
        
        let resto = 11 - (soma % 11);
        let digito1 = resto > 9 ? 0 : resto;
        
        if (parseInt(cpf.charAt(9)) !== digito1) return false;
        
        soma = 0;
        for (let i = 0; i < 10; i++) {
            soma += parseInt(cpf.charAt(i)) * (11 - i);
        }
        
        resto = 11 - (soma % 11);
        let digito2 = resto > 9 ? 0 : resto;
        
        return parseInt(cpf.charAt(10)) === digito2;
    };
    
    const handleInputChange = (field, value) => {
        setForm(prev => ({ ...prev, [field]: value }));
        
        // ValidaÃ§Ã£o em tempo real
        let error = null;
        
        if (field === 'tax_id') {
            error = validateTaxId(value);
        } else if (field === 'phone') {
            error = validatePhone(value);
        }
        
        setErrors(prev => ({
            ...prev,
            [field]: error
        }));
    };
    
    const handleSubmit = async (e) => {
        e.preventDefault();
        
        // Validar todos os campos
        const taxIdError = validateTaxId(form.tax_id);
        const phoneError = validatePhone(form.phone);
        
        const newErrors = {
            tax_id: taxIdError,
            phone: phoneError,
        };
        
        // Remover erros null
        Object.keys(newErrors).forEach(key => {
            if (newErrors[key] === null) {
                delete newErrors[key];
            }
        });
        
        setErrors(newErrors);
        
        if (Object.keys(newErrors).length > 0) {
            return;
        }
        
        try {
            const response = await axios.post('/api/register', {
                ...form,
                region,
            });
            
            console.log('Sucesso:', response.data);
            
        } catch (error) {
            if (error.response?.status === 422) {
                setErrors(error.response.data.errors);
            } else {
                console.error('Erro:', error);
            }
        }
    };
    
    useEffect(() => {
        // Obter regiÃ£o do backend
        const detectedRegion = window.Laravel?.region || 'MZ';
        setRegion(detectedRegion);
    }, []);
    
    const isFormValid = form.tax_id && form.phone && 
                       Object.keys(errors).length === 0;
    
    return (
        <form onSubmit={handleSubmit} className="lusophone-form">
            <div className="form-group">
                <label htmlFor="tax_id">{config.taxIdLabel}</label>
                <input
                    type="text"
                    id="tax_id"
                    value={form.tax_id}
                    placeholder={config.taxIdPlaceholder}
                    onChange={(e) => handleInputChange('tax_id', e.target.value)}
                    className={errors.tax_id ? 'is-invalid' : ''}
                />
                {errors.tax_id && (
                    <div className="invalid-feedback">
                        {errors.tax_id}
                    </div>
                )}
            </div>
            
            <div className="form-group">
                <label htmlFor="phone">{config.phoneLabel}</label>
                <input
                    type="tel"
                    id="phone"
                    value={form.phone}
                    placeholder={config.phonePlaceholder}
                    onChange={(e) => handleInputChange('phone', e.target.value)}
                    className={errors.phone ? 'is-invalid' : ''}
                />
                {errors.phone && (
                    <div className="invalid-feedback">
                        {errors.phone}
                    </div>
                )}
            </div>
            
            <button 
                type="submit" 
                disabled={!isFormValid}
                className="btn btn-primary"
            >
                Registar
            </button>
        </form>
    );
};

export default LusophoneForm;
```

## PrÃ³ximos Passos

Agora que domina as validaÃ§Ãµes universais do Laravel Lusophone:

1. **[Aprenda sobre formataÃ§Ã£o de moedas e nÃºmeros](formatting.md)**
2. **[Explore o sistema de traduÃ§Ãµes](translations.md)**
3. **[Configure detecÃ§Ã£o de regiÃ£o](detection.md)**
4. **[Personalize para seu caso de uso](customization.md)**
5. **[Implemente em produÃ§Ã£o](deployment.md)**

---

**ValidaÃ§Ã£o concluÃ­da! âœ… As suas aplicaÃ§Ãµes agora validam dados corretamente em todos os paÃ­ses lusÃ³fonos automaticamente.**
